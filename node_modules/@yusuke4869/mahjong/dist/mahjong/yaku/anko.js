"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.anko = void 0;
const convert_1 = require("../hai/convert");
const convert_2 = require("./convert");
const anko = (data) => {
    let count = 0;
    const haiArr = [];
    for (const elem of (0, convert_2.agariElementsRemoveAka)(data.agari.elements)) {
        if (elem.type === "anko" || elem.type === "ankan") {
            count++;
            haiArr.push(elem.hai[0]);
        }
    }
    if (count < 3)
        return convert_2.notExistsRes;
    const atamaHai = (0, convert_1.aka2Normal)(data.agari.elements.filter((elem) => elem.type === "toitsu")[0].hai[0]);
    const agariHai = (0, convert_1.aka2Normal)(data.agariHai);
    if (count === 4) {
        if (agariHai === atamaHai || data.tenho) {
            const res = {
                exists: true,
                yaku: "四暗刻単騎",
                han: 0,
                yakuman: data.doubleYakuman ? 2 : 1,
            };
            return res;
        }
        else if (data.tsumo) {
            const res = {
                exists: true,
                yaku: "四暗刻",
                han: 0,
                yakuman: 1,
            };
            return res;
        }
        else {
            const res = {
                exists: true,
                yaku: "三暗刻",
                han: 2,
                yakuman: 0,
            };
            return res;
        }
    }
    const jud = haiArr.includes(agariHai);
    if ((jud && data.tsumo) || !jud) {
        const res = {
            exists: true,
            yaku: "三暗刻",
            han: 2,
            yakuman: 0,
        };
        return res;
    }
    return convert_2.notExistsRes;
};
exports.anko = anko;
//# sourceMappingURL=anko.js.map