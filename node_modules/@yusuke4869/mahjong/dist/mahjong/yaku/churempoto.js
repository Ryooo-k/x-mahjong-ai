"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.churempoto = void 0;
const array_1 = require("../hai/array");
const convert_1 = require("../hai/convert");
const convert_2 = require("./convert");
const churempoto = (data) => {
    if (data.hai.furo.length > 0)
        return convert_2.notExistsRes;
    const haiArrObj = (0, array_1.getHaiArrayObject)(data.hai.hai);
    let haiType = undefined;
    for (const k of Object.keys(haiArrObj)) {
        const len = haiArrObj[k].filter((v) => v !== 0).length;
        if (len === 0)
            continue;
        if (len !== 9)
            return convert_2.notExistsRes;
        if (haiType !== undefined)
            return convert_2.notExistsRes;
        haiType = k;
        for (const [index, value] of haiArrObj[k].entries()) {
            if (index === 0 || index === 8) {
                if (value < 3)
                    return convert_2.notExistsRes;
                haiArrObj[k][index] -= 3;
            }
            else {
                if (value === 0)
                    return convert_2.notExistsRes;
                haiArrObj[k][index] -= 1;
            }
        }
    }
    if (haiType === undefined)
        return convert_2.notExistsRes;
    if (haiArrObj[haiType].filter((v) => v !== 0).length !== 1)
        return convert_2.notExistsRes;
    // 純正九蓮宝燈
    if (haiArrObj[haiType][(0, convert_1.getHaiNormalNum)(data.agariHai) - 1] === 1 || data.tenho) {
        const res = {
            exists: true,
            yaku: "純正九蓮宝燈",
            han: 0,
            yakuman: data.doubleYakuman ? 2 : 1,
        };
        return res;
    }
    const res = {
        exists: true,
        yaku: "九蓮宝燈",
        han: 0,
        yakuman: 1,
    };
    return res;
};
exports.churempoto = churempoto;
//# sourceMappingURL=churempoto.js.map