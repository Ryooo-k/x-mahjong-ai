"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.dora = void 0;
const convert_1 = require("../hai/convert");
const convert_2 = require("./convert");
const dora = (data, doraHyo, uradoraHyo) => {
    const res = [];
    const doraHai = doraHyo.map((v) => (0, convert_2.doraHyo2Dora)(v));
    const uradoraHai = uradoraHyo === null || uradoraHyo === void 0 ? void 0 : uradoraHyo.map((v) => (0, convert_2.doraHyo2Dora)(v));
    let isFuro = false;
    let countAka = 0;
    let countDora = 0;
    let countUraDora = 0;
    for (const hai of data.hai.hai) {
        if (hai === "0m" || hai === "0p" || hai === "0s")
            countAka++;
        const h = (0, convert_1.aka2Normal)(hai);
        for (const dora of doraHai)
            if (dora === h)
                countDora++;
        for (const uradora of uradoraHai !== null && uradoraHai !== void 0 ? uradoraHai : [])
            if (uradora === h)
                countUraDora++;
    }
    for (const furo of data.hai.furo) {
        if (furo.type !== "ankan")
            isFuro = true;
        for (const hai of furo.hai) {
            if (hai === "0m" || hai === "0p" || hai === "0s")
                countAka++;
            const h = (0, convert_1.aka2Normal)(hai);
            for (const dora of doraHai)
                if (dora === h)
                    countDora++;
            for (const uradora of uradoraHai !== null && uradoraHai !== void 0 ? uradoraHai : [])
                if (uradora === h)
                    countUraDora++;
        }
    }
    if (countDora > 0)
        res.push({
            exists: true,
            yaku: "ドラ",
            han: countDora,
            yakuman: 0,
        });
    if (countAka > 0)
        res.push({
            exists: true,
            yaku: "赤ドラ",
            han: countAka,
            yakuman: 0,
        });
    if (!isFuro && countUraDora > 0)
        res.push({
            exists: true,
            yaku: "裏ドラ",
            han: countUraDora,
            yakuman: 0,
        });
    return res;
};
exports.dora = dora;
//# sourceMappingURL=dora.js.map