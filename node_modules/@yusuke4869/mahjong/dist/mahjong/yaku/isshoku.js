"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isshoku = void 0;
const array_1 = require("../hai/array");
const convert_1 = require("../hai/convert");
const convert_2 = require("./convert");
const isshoku = (data) => {
    const haiArrObj = (0, array_1.getHaiArrayObject)(data.hai.hai);
    let existsFuro = false;
    let haiType = undefined;
    let existsJihai = false;
    for (const k of Object.keys(haiArrObj)) {
        const len = haiArrObj[k].filter((v) => v !== 0).length;
        if (len === 0)
            continue;
        if (k === "jihai") {
            existsJihai = true;
            continue;
        }
        if (haiType !== undefined)
            return convert_2.notExistsRes;
        haiType = k;
    }
    for (const furo of data.hai.furo) {
        if (furo.type !== "ankan")
            existsFuro = true;
        const t = (0, convert_1.suffix2FullType)((0, convert_1.getHaiSuffix)(furo.hai[0]));
        if (t === "jihai") {
            existsJihai = true;
            continue;
        }
        if (haiType !== undefined && haiType !== t)
            return convert_2.notExistsRes;
    }
    if (haiType === undefined)
        return convert_2.notExistsRes;
    if (existsJihai) {
        const res = {
            exists: true,
            yaku: "混一色",
            han: existsFuro ? 2 : 3,
            yakuman: 0,
        };
        return res;
    }
    const res = {
        exists: true,
        yaku: "清一色",
        han: existsFuro ? 5 : 6,
        yakuman: 0,
    };
    return res;
};
exports.isshoku = isshoku;
//# sourceMappingURL=isshoku.js.map