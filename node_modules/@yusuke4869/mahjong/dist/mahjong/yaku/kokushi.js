"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.kokushi = void 0;
const array_1 = require("../hai/array");
const convert_1 = require("./convert");
const kokushi = (data) => {
    if (data.agari.elements.length > 0)
        return convert_1.notExistsRes;
    if (data.hai.furo.length > 0)
        return convert_1.notExistsRes;
    const haiArrObj = (0, array_1.getHaiArrayObject)(data.hai.hai);
    let count = 0;
    for (const k of Object.keys(haiArrObj)) {
        for (const [index, value] of haiArrObj[k].entries()) {
            if (k === "jihai") {
                if (value === 0)
                    return convert_1.notExistsRes;
                else
                    count++;
            }
            else if (index === 0 || index === 8) {
                if (value === 0)
                    return convert_1.notExistsRes;
                else
                    count++;
            }
            else {
                if (value !== 0)
                    return convert_1.notExistsRes;
            }
        }
    }
    if (count !== 13)
        return convert_1.notExistsRes;
    const r = data.hai.hai.filter((h) => h === data.agariHai);
    if (r.length === 2 || data.tenho) {
        const res = {
            exists: true,
            yaku: "国士無双十三面待ち",
            han: 0,
            yakuman: data.doubleYakuman ? 2 : 1,
        };
        return res;
    }
    const res = {
        exists: true,
        yaku: "国士無双",
        han: 0,
        yakuman: 1,
    };
    return res;
};
exports.kokushi = kokushi;
//# sourceMappingURL=kokushi.js.map