"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.peko = void 0;
const convert_1 = require("./convert");
const peko = (data) => {
    let existsFuro = false;
    const shuntsuAgariArr = (0, convert_1.agariElementsRemoveAka)(data.agari.elements).filter((v) => {
        if (v.furo)
            existsFuro = true;
        return v.type === "shuntsu";
    });
    if (existsFuro || shuntsuAgariArr.length < 2)
        return convert_1.notExistsRes;
    const shuntsuCounts = shuntsuAgariArr
        .map((v) => v.hai.join(""))
        .reduce((acc, cur) => ((acc[cur] = (acc[cur] || 0) + 1), acc), {});
    const tarCountArr = Object.values(shuntsuCounts).filter((v) => v > 1);
    if (tarCountArr.length === 2 || (tarCountArr.length === 1 && tarCountArr[0] === 4)) {
        const res = {
            exists: true,
            yaku: "二盃口",
            han: 3,
            yakuman: 0,
        };
        return res;
    }
    else if (tarCountArr.length === 1) {
        const res = {
            exists: true,
            yaku: "一盃口",
            han: 1,
            yakuman: 0,
        };
        return res;
    }
    return convert_1.notExistsRes;
};
exports.peko = peko;
//# sourceMappingURL=peko.js.map