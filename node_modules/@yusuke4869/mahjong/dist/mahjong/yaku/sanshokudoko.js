"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.sanshokudoko = void 0;
const convert_1 = require("../hai/convert");
const convert_2 = require("./convert");
const sanshokudoko = (data) => {
    const kotsuArr = [];
    for (const elem of data.agari.elements) {
        const t = elem.type;
        if (t === "shuntsu" || t === "toitsu")
            continue;
        if ((0, convert_1.getHaiSuffix)(elem.hai[0]) === "z")
            continue;
        kotsuArr.push(elem.hai[0]);
    }
    const kotsuSet = new Set(kotsuArr);
    if (kotsuSet.size < 3)
        return convert_2.notExistsRes;
    const numArr = Array.from(kotsuSet).map((v) => (0, convert_1.getHaiNormalNum)(v));
    const numSet = new Set(numArr);
    if (kotsuSet.size === 3 && numSet.size === 1) {
        const res = {
            exists: true,
            yaku: "三色同刻",
            han: 2,
            yakuman: 0,
        };
        return res;
    }
    if (kotsuSet.size === 4 && numSet.size === 2) {
        for (const num of numSet) {
            if (numArr.filter((v) => v === num).length === 3) {
                const res = {
                    exists: true,
                    yaku: "三色同刻",
                    han: 2,
                    yakuman: 0,
                };
                return res;
            }
        }
    }
    return convert_2.notExistsRes;
};
exports.sanshokudoko = sanshokudoko;
//# sourceMappingURL=sanshokudoko.js.map